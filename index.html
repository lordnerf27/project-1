<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VibeCode – Retro App</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}

  :root{
    /* Sakura / cream */
    --bg: #f6dee6;
    --panel: #ffeaf1;
    --panel-2:#ffd7e6;
    --ink:#1d1b20;
    --accent:#d46a8f;
    --line: rgba(0,0,0,.20);
    --shadow: rgba(0,0,0,.18);
    --green:#9bbc0f; /* for fireworks pixels */
  }

  body{
    font-family: "VT323", ui-monospace, monospace;
    color: var(--ink);
    background:
      var(--bg)
      url('assets/expanded_bg.jpg') center/800px repeat fixed; /* GLOBAL BACKGROUND */
    display:grid; place-items:center;
  }

  /* GAME FRAME */
  .frame{
    width:min(96vw, 980px);
    aspect-ratio:16/9;
    position:relative;
    border:12px solid #fff;
    border-radius:22px;
    background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
    box-shadow:
      0 30px 60px var(--shadow),
      inset 0 0 0 6px #ffd1e0,
      inset 0 0 0 14px #fff;
    overflow:hidden;
    image-rendering: pixelated;
  }

  /* Curtains (centered + more dramatic) */
  .curtain{
    position:absolute; top:0; bottom:0; width:58%;
    background:
      repeating-linear-gradient(90deg,#ff9ec0 0 8px,#ff7aa7 8px 16px);
    box-shadow: inset 0 0 0 10px #ffb3cc, 0 10px 40px var(--shadow);
    z-index:7;
    transform: translateX(0);
    transition: transform 1200ms cubic-bezier(.16,.84,.21,1.04);
  }
  .curtain.left { left:0;  clip-path: polygon(0 0,100% 0,85% 100%,0 100%); box-shadow: inset -10px 0 0 #ff7aa7, 0 10px 40px var(--shadow);}
  .curtain.right{ right:0; clip-path: polygon(15% 0,100% 0,100% 100%,0 100%); box-shadow: inset 10px 0 0 #ff7aa7, 0 10px 40px var(--shadow);}

  .curtains-open .curtain.left  { transform: translateX(-100%); }
  .curtains-open .curtain.right { transform: translateX(100%); }

  /* Content layers */
  .layer{position:absolute; inset:0; display:grid; place-items:center; padding:24px}
  .hidden{display:none}

  /* Cards / buttons */
  .card{
    background:#fff; border:4px solid #ffd1e0; border-radius:16px;
    box-shadow: 0 10px 0 #ffb6cf, 0 20px 40px var(--shadow);
    padding:20px 24px; text-align:center; max-width:640px;
  }
  h1,h2,p{margin:.25rem 0}
  .btn{
    cursor:pointer; display:inline-block; margin-top:10px;
    padding:10px 18px; border:3px solid #ffb6cf; background:#ffebf2;
    box-shadow:0 4px 0 #ffb6cf; text-transform:uppercase; letter-spacing:1px; font-weight:700;
  }
  .btn:active{ transform: translateY(2px); box-shadow:0 2px 0 #ffb6cf }

  /* Player select */
  .player-card{
    width:min(60%,520px); max-width:520px; cursor:pointer;
    border:4px solid #ffb6cf; border-radius:14px; overflow:hidden; background:#fff;
    box-shadow:0 10px 0 #ffb6cf, 0 20px 40px var(--shadow);
    transition: transform .12s ease, box-shadow .12s ease;
  }
  .player-card:hover{ transform: translateY(-2px); box-shadow:0 12px 0 #ffb6cf, 0 24px 44px var(--shadow) }
  .player-card img{ width:100%; display:block; }

  /* Choice grid */
  .panel{ width:100%; max-width:760px; }
  .grid{ display:grid; grid-template-columns: repeat(2, 1fr); gap:14px; margin-top:12px }
  .option{
    padding:16px 12px; border:3px solid #ffb6cf; background:#fff; text-align:center; font-weight:700;
    box-shadow:0 4px 0 #ffb6cf; cursor:pointer;
  }
  .option:active{ transform: translateY(2px); box-shadow:0 2px 0 #ffb6cf }

  /* Dialog box (bottom) */
  .dialog{
    position:absolute; left:16px; right:16px; bottom:16px;
    display:flex; gap:10px; align-items:flex-start;
    padding:10px 12px; background: rgba(0,0,0,.25);
    border:3px solid #ffb6cf; border-radius:12px; color:#fff; font-size:22px;
    z-index:8;
  }
  .avatar{
    width:42px; height:42px; border-radius:8px; border:3px solid #ffb6cf; overflow:hidden; flex:0 0 auto; background:#fff;
  }
  .avatar img{width:100%;height:100%;object-fit:cover}

  /* FX canvas */
  canvas#fx{ position:absolute; inset:0; pointer-events:none; z-index:6 }
</style>
</head>
<body>
  <div class="frame" id="frame">
    <canvas id="fx"></canvas>

    <!-- Curtains -->
    <div class="curtain left"></div>
    <div class="curtain right"></div>

    <!-- Welcome -->
    <div class="layer" id="welcomeLayer">
      <div class="card">
        <h1 style="font-size:48px;">Welcome</h1>
        <p>Get ready to VibeCode.</p>
        <button class="btn" id="toSelect">Continue</button>
      </div>
    </div>

    <!-- Player Select -->
    <div class="layer hidden" id="playerLayer">
      <div class="card" style="background:transparent; box-shadow:none; border:none">
        <h2 style="font-size:38px; text-align:center;">Select your player</h2>
        <div class="player-card" id="playerCard" title="Click to select">
          <!-- Replace the src file with your image path -->
          <img src="assets/player-profile.jpg" alt="Player profile">
        </div>
        <p style="opacity:.8">Click the card to choose.</p>
      </div>
    </div>

    <!-- Choices -->
    <div class="layer hidden" id="choiceLayer">
      <div class="panel">
        <h2 style="font-size:40px; text-align:center; margin-bottom:8px;">Choose your destination!</h2>
        <div class="grid">
          <button class="option" data-key="B">IUB</button>
          <button class="option" data-key="A">NSU</button>
          <button class="option" data-key="C">AIUB</button>
          <button class="option" data-key="D">BRAC</button>
        </div>
      </div>
      <div class="dialog" id="dialog">
        <div class="avatar"><img src="assets/admin-avatar.jpg" alt="Admin"></div>
        <div id="dialogText"></div>
      </div>
    </div>
  </div>

<script>
/* ===== tiny sfx (beeps) ===== */
const SFX = (() => {
  let ctx;
  const ensure = () => ctx = ctx || new (window.AudioContext||window.webkitAudioContext)();
  const beep = (f=520,d=0.12,t='square',v=0.12) => {
    ensure();
    const o = ctx.createOscillator(), g = ctx.createGain();
    o.type=t; o.frequency.value=f; g.gain.value=v; o.connect(g); g.connect(ctx.destination);
    const now = ctx.currentTime; o.start(now); o.stop(now+d);
  };
  return { beep };
})();

/* ===== fireworks (pixel confetti) ===== */
const FX = (() => {
  const c = document.getElementById('fx'), k = c.getContext('2d');
  let W,H, raf, P=[];
  const R = (a,b)=>a+Math.random()*(b-a);
  const resize = () => { W=c.width=c.offsetWidth; H=c.height=c.offsetHeight; };
  const burst = (x,y,n=120) => {
    for(let i=0;i<n;i++){
      const a=Math.random()*Math.PI*2, s=R(1.2,3.6);
      P.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:R(40,80),age:0});
    }
    if(!raf) loop();
  };
  const loop = () => {
    raf=requestAnimationFrame(loop);
    k.clearRect(0,0,W,H);
    for(let i=P.length-1;i>=0;i--){
      const p=P[i]; p.age++; p.x+=p.vx; p.y+=p.vy; p.vy+=0.02;
      const a=1-p.age/p.life; if(a<=0){P.splice(i,1); continue;}
      k.globalAlpha=a; k.fillStyle=getComputedStyle(document.documentElement).getPropertyValue('--green').trim()||'#9bbc0f'; 
      k.fillRect(p.x,p.y,3,3); k.globalAlpha=1;
    }
    if(P.length===0){ cancelAnimationFrame(raf); raf=null; }
  };
  window.addEventListener('resize', resize); resize();
  return { burst };
})();

/* ===== typewriter for dialog ===== */
function typeText(el, text, speed=22){
  el.textContent='';
  let i=0; const id=setInterval(()=>{ el.textContent += text[i++]||''; if(i>text.length){clearInterval(id);} }, speed);
}

/* ===== flow ===== */
const frame = document.getElementById('frame');
const welcomeLayer = document.getElementById('welcomeLayer');
const playerLayer  = document.getElementById('playerLayer');
const choiceLayer  = document.getElementById('choiceLayer');
const dialogText   = document.getElementById('dialogText');

document.getElementById('toSelect').addEventListener('click', ()=>{
  welcomeLayer.classList.add('hidden');
  playerLayer.classList.remove('hidden');
  SFX.beep(640,.12);
});

/* Select player (clickable card) */
document.getElementById('playerCard').addEventListener('click', ()=>{
  SFX.beep(740,.14);
  // Curtains open into choices
  playerLayer.classList.add('hidden');
  choiceLayer.classList.remove('hidden');
  frame.classList.add('curtains-open');
  // First dialog line
  typeText(dialogText, "Hey there! I'm your guide. Pick the correct destination…");
});

/* Destination logic */
let correctKey='B';
let firstHit=false;

document.querySelectorAll('.option').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const key = btn.dataset.key;
    if(key!==correctKey){
      // wrong answers: quick beep + snark
      SFX.beep(180,.10);
      const wrong = {A:"NSU: you are too broke for this.", C:"AIUB: whoops, not this one.", D:"BRAC: whoa, you're not going here—too far!"}[key] || "Nope.";
      typeText(dialogText, wrong);
      return;
    }
    if(!firstHit){
      firstHit=true;
      typeText(dialogText, "First attempt didn’t work. Try again!");
      SFX.beep(360,.12);
      return;
    }
    // success!
    typeText(dialogText, "Congratulations! This is the first step to your dreams!");
    SFX.beep(620,.12);
    const r = btn.getBoundingClientRect(), fr = frame.getBoundingClientRect();
    const x = r.left-fr.left+r.width/2, y = r.top-fr.top+r.height/2;
    for(let i=0;i<6;i++) setTimeout(()=>FX.burst(x,y), i*120);
  });
});
</script>
</body>
</html>
