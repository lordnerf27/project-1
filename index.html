<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body,html{height:100%;font-family:'VT323',monospace;background:#ffc0cb url("assets/globalBG.jpg") repeat;overflow:hidden}

  .frame{
    width:min(95vw,1200px);
    height:min(90vh,700px);
    margin:auto;
    position:relative;
    top:50%;transform:translateY(-50%);
    border:12px solid #fff;
    border-radius:20px;
    box-shadow:0 18px 50px rgba(0,0,0,.15);
    background:#ffd6e8;
    overflow:hidden;
  }

  .curtain{
    position:absolute;top:0;bottom:0;width:50%;
    background:#ff94c2;
    transition:transform 1.5s ease-in-out;
    z-index:5;
  }
  .curtain.left{left:0;transform:translateX(0)}
  .curtain.right{right:0;transform:translateX(0)}
  .curtain.open.left{transform:translateX(-100%)}
  .curtain.open.right{transform:translateX(100%)}

  .center-msg{
    position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
    font-size:42px;color:#fff;text-shadow:2px 2px #000;z-index:6;cursor:pointer;
  }

  .panel{
    position:absolute;left:50%;top:50%;
    transform:translate(-50%,-44%);
    width:100%;max-width:820px;text-align:center;
  }
  .panel h2{font-size:40px;margin:0 0 8px}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px;margin-top:14px}
  .grid button{padding:12px;font-size:28px;cursor:pointer;background:#fff;border:3px solid #ff94c2;border-radius:8px}

  .dialog{
    position:absolute;bottom:0;left:0;right:0;
    background:rgba(0,0,0,.2);
    display:flex;align-items:center;padding:8px;
    font-size:22px;color:#fff;
  }
  .dialog img{width:40px;height:40px;border-radius:50%;margin-right:10px}

  .player-card{
    display:flex;justify-content:center;align-items:center;height:100%;
  }
  .player-card img{width:200px;height:auto;border:6px solid #fff;border-radius:12px}

  .celebrate{
    position:absolute;top:50%;left:50%;
    transform:translate(-50%,-50%);
    width:200px;z-index:20;
  }
  .celebrate img{width:100%;display:block;border:6px solid #fff;border-radius:12px}
  canvas{position:absolute;bottom:0;left:0;pointer-events:none;z-index:19}
</style>
</head>
<body>
<div class="frame" id="frame">
  <div class="curtain left" id="curtainLeft"></div>
  <div class="curtain right" id="curtainRight"></div>
  <div class="center-msg" id="startMsg">Click to start</div>

  <!-- Dialog -->
  <div class="dialog" id="dialog" style="display:none;">
    <img src="assets/avatar.jpg" alt="Admin Avatar">
    <span id="dialogText"></span>
  </div>
</div>

<script>
const frame=document.getElementById('frame');
const curtainLeft=document.getElementById('curtainLeft');
const curtainRight=document.getElementById('curtainRight');
const startMsg=document.getElementById('startMsg');
const dialog=document.getElementById('dialog');
const dialogText=document.getElementById('dialogText');

let step=0;

startMsg.onclick=()=>{
  startMsg.style.display="none";
  curtainLeft.classList.add("open");
  curtainRight.classList.add("open");
  setTimeout(showPlayerSelect,1600);
};

function showPlayerSelect(){
  dialog.style.display="flex";
  dialogText.textContent="Pick your player!";
  const pc=document.createElement('div');
  pc.className='player-card';
  pc.innerHTML=`<img src="assets/player-profile.jpg" alt="Player">`;
  frame.appendChild(pc);
  pc.onclick=()=>{
    pc.remove();
    showDestination();
  };
}

function showDestination(){
  dialogText.textContent="BOO! Where do you want to go?";
  const panel=document.createElement('div');
  panel.className='panel';
  panel.innerHTML=`
    <h2>Choose your destination!</h2>
    <div class="grid">
      <button data-opt="IUB">IUB</button>
      <button data-opt="NSU">NSU</button>
      <button data-opt="AIUB">AIUB</button>
      <button data-opt="BRAC">BRAC</button>
    </div>`;
  frame.appendChild(panel);

  let attempts=0;
  panel.querySelectorAll("button").forEach(btn=>{
    btn.onclick=()=>{
      attempts++;
      const choice=btn.dataset.opt;
      if(choice==="AIUB"){
        if(attempts===1){
          dialogText.textContent="First attempt didn't work. Try again.";
        } else {
          dialogText.textContent="Congratulations! This is the first step to your dreams!";
          setTimeout(()=>{panel.remove();showCelebration();},800);
        }
      } else if(choice==="NSU"){
        dialogText.textContent="You're too broke for this.";
      } else if(choice==="BRAC"){
        dialogText.textContent="You're scared of presentations.";
      } else {
        dialogText.textContent="Whoops, not this one.";
      }
    };
  });
}

function showCelebration(){
  const card=document.createElement('div');
  card.className='celebrate';
  card.innerHTML=`<img src="assets/player-profile.jpg" alt="Player">`;
  frame.appendChild(card);

  // gentle bouncing
  const cx=frame.clientWidth/2,cy=frame.clientHeight/2;
  const ampX=Math.min(60,frame.clientWidth*0.05);
  const ampY=Math.min(40,frame.clientHeight*0.05);
  let x=cx,y=cy,vx=0.8,vy=0.6;

  function tick(){
    x+=vx;y+=vy;
    if(x>cx+ampX||x<cx-ampX)vx*=-1;
    if(y>cy+ampY||y<cy-ampY)vy*=-1;
    card.style.left=x+'px';
    card.style.top=y+'px';
    card.style.transform='translate(-50%,-50%)';
    requestAnimationFrame(tick);
  }
  tick();

  launchConfetti();
}

// Confetti + fireworks
function launchConfetti(){
  const canvas=document.createElement('canvas');
  canvas.width=frame.clientWidth;
  canvas.height=frame.clientHeight;
  frame.appendChild(canvas);
  const ctx=canvas.getContext('2d');
  let pieces=[];
  for(let i=0;i<200;i++){
    pieces.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height-canvas.height,
      w:8,h:14,
      col:`hsl(${Math.random()*360},100%,50%)`,
      vy:2+Math.random()*3,vx:Math.random()*2-1
    });
  }
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      ctx.fillStyle=p.col;
      ctx.fillRect(p.x,p.y,p.w,p.h);
      p.y+=p.vy;p.x+=p.vx;
      if(p.y>canvas.height)p.y=-20;
    });
    requestAnimationFrame(draw);
  }
  draw();
}
</script>
</body>
</html>
